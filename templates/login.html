{% extends "base.html" %}

{% block title %}SmartAssist | Login{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', path='css/login.css') }}">
{% endblock %}

{% block nav_links %}
<a href="/">Home</a>
<a href="/register">Register</a>
{% endblock %}

{% block content %}
<div class="page-content">
    <div class="login-wrapper">
      <!-- Left Side - Welcome Section -->
      <div class="login-left">
        <div class="welcome-content">
          <div class="logo-large">
            <img src="{{ url_for('static', path='assets/images/logo.png') }}" alt="SmartAssist Logo">
          </div>
          <h1>Welcome Back!</h1>
          <p>Sign in to access your SmartAssist account and enjoy seamless campus services.</p>
          
          <div class="feature-list">
            <div class="feature-item">
              <i class="fas fa-robot"></i>
              <span>AI-Powered Assistance</span>
            </div>
            <div class="feature-item">
              <i class="fas fa-ticket-alt"></i>
              <span>Ticket Management</span>
            </div>
            <div class="feature-item">
              <i class="fas fa-map-marked-alt"></i>
              <span>Campus Navigation</span>
            </div>
            <div class="feature-item">
              <i class="fas fa-clock"></i>
              <span>24/7 Support</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Side - Login Form -->
      <div class="login-right">
        <div class="login-header">
          <h2>Sign In</h2>
          <p>Choose your account type to continue</p>
        </div>

        <!-- Tab Switcher -->
        <div class="tab-container">
          <button class="tab-btn active" onclick="switchTab('university')">
            <i class="fas fa-graduation-cap"></i> University
          </button>
          <button class="tab-btn" onclick="switchTab('guest')">
            <i class="fas fa-user"></i> Guest
          </button>
        </div>

        <!-- University Members Tab -->
        <div id="university-tab" class="tab-content active">
          <form action="/login" method="post">
            <div class="form-group">
              <label>Email Address</label>
              <div class="input-wrapper">
                <i class="fas fa-envelope input-icon"></i>
                <input type="email" name="email" placeholder="john@tamucc.edu" required />
              </div>
            </div>

            <div class="form-group">
              <label>Password</label>
              <div class="input-wrapper">
                <i class="fas fa-lock input-icon"></i>
                <input type="password" id="password" name="password" class="has-toggle" placeholder="Enter your password" required />
                <i class="fas fa-eye password-toggle" onclick="togglePassword()"></i>
              </div>
            </div>

            <div class="form-group">
              <label>Role</label>
              <div class="input-wrapper">
                <i class="fas fa-user-tag input-icon"></i>
                <select name="role" required>
                  <option value="">Select your role</option>
                  <option value="student">üéì Student</option>
                  <option value="staff">üë®‚Äçüíº Staff</option>
                  <option value="admin">‚öôÔ∏è Admin</option>
                </select>
              </div>
            </div>

            <button type="submit" class="login-btn">
              <i class="fas fa-sign-in-alt"></i> Sign In
            </button>
          </form>

          <p class="footer-text">
            Don't have an account? <a href="/register">Create one now</a>
          </p>
        </div>

        <!-- Guest Tab -->
        <div id="guest-tab" class="tab-content">
          <p style="text-align: center; color: #666; margin-bottom: 2rem;">
            Sign in with your Google account to access SmartAssist as a guest.
          </p>
          
          <button onclick="window.location.href='/login/google'" class="google-btn">
            <i class="fab fa-google"></i>
            Sign in with Google
          </button>

          <div class="divider">
            <span>Quick access for visitors</span>
          </div>

          <p style="text-align: center; color: #999; font-size: 0.85rem; line-height: 1.6;">
            Guest accounts have limited access to campus services. For full features, please register as a university member.
          </p>
        </div>

        <p style="text-align: center; margin-top: 2rem; font-size: 0.8rem; color: #999;">
          ¬© 2025 TAMU-CC SmartAssist. All rights reserved.
        </p>
      </div>
    </div>
  </div> <!-- Close page-content -->
{% endblock %}

{% block extra_scripts %}
<script>
  function switchTab(tab) {
    // Update tab buttons
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    event.target.closest('.tab-btn').classList.add('active');

    // Update tab content
    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
    if (tab === 'university') {
      document.getElementById('university-tab').classList.add('active');
    } else {
      document.getElementById('guest-tab').classList.add('active');
    }
  }

  function togglePassword() {
    const passwordInput = document.getElementById('password');
    const toggleIcon = document.querySelector('.password-toggle');

    if (passwordInput.type === 'password') {
      passwordInput.type = 'text';
      toggleIcon.innerHTML = '<i class="fas fa-eye-slash"></i>';
    } else {
      passwordInput.type = 'password';
      toggleIcon.innerHTML = '<i class="fas fa-eye"></i>';
    }
  }
</script>
{% endblock %}